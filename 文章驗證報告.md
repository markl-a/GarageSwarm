# BMAD-METHOD 教學文章驗證報告

## 驗證日期
2025-11-10

## 驗證範圍
- 代理系統描述準確性
- 工作流程完整性
- 命令與參數正確性
- 配置檔案結構
- 範例程式碼可行性

---

## 發現的問題

### 1. 命令名稱錯誤

#### 問題 1.1: Story Ready 命令
**位置**: 第 3.2.4 節 SM 代理
**錯誤**: `*story-ready-for-dev`
**正確**: `*story-ready`
**來源**: `.bmad/bmm/workflows/4-implementation/story-ready/workflow.yaml`

#### 問題 1.2: UX Design 命令
**位置**: 第 3.2.7 節 UX Designer
**錯誤**: `*create-ux-design`
**正確**: `*create-design`
**來源**: `.bmad/bmm/agents/ux-designer.md` line 73

### 2. 代理資訊不完整

#### 問題 2.1: UX Designer (Sally)
**遺漏資訊**:
- 正確名稱: Sally（不是未指定）
- 命令: `*create-design`, `*validate-design`
- 身份: 7+ 年資深 UX 設計師

#### 問題 2.2: Tech Writer (Paige)
**嚴重遺漏**: 文章中 Tech Writer 描述過於簡略
**實際功能**:
- `*document-project` - 綜合專案文件化
- `*create-api-docs` - API 文件（待實作）
- `*create-architecture-docs` - 架構文件（待實作）
- `*create-user-guide` - 使用者指南（待實作）
- `*audit-docs` - 文件審查（待實作）
- `*generate-diagram` - 生成 Mermaid 圖表
- `*validate-doc` - 驗證文件標準
- `*improve-readme` - 改善 README
- `*explain-concept` - 解釋技術概念
- `*standards-guide` - 顯示文件標準

### 3. 遺漏的重要工作流程

#### 問題 3.1: workflow-status
**重要性**: 高
**描述**: 輕量級狀態檢查器，回答「現在該做什麼？」
**用途**: 任何代理都可使用，讀取 YAML 狀態文件追蹤工作流程

#### 問題 3.2: retrospective（Epic 回顧）
**重要性**: 中
**現有描述**: 過於簡略
**實際特點**:
- 促進者: Bob (Scrum Master)
- 基調: 心理安全 - 無責備，專注於系統和流程
- 格式: 兩部分（1）回顧已完成的 Epic（2）預覽下一個 Epic 準備
- 驗證要求:
  - 測試是否完成
  - 部署狀態
  - 業務驗證
  - 技術健康度
  - 阻礙解決

#### 問題 3.3: story-ready
**描述**: 將草擬的 Story 標記為準備開發，狀態從 TODO → IN PROGRESS
**說明**: 這是一個無需搜尋的簡單狀態更新工作流程
**與 story-context 的區別**: story-ready 不組裝上下文，只更新狀態

#### 問題 3.4: document-project
**重要性**: 高（Brownfield 專案）
**描述**: 分析和文件化既有專案，掃描程式碼、架構和模式，創建 AI 輔助開發的綜合參考文件
**輸出**:
- 架構掃描
- 模式識別
- 技術債務報告
**位置**: `.bmad/bmm/workflows/document-project/`

### 4. 遺漏的進階概念

#### 問題 4.1: Advanced Elicitation (adv-elicit)
**重要性**: 中高
**描述**: 進階引導技術，挑戰 LLM 以獲得更好的結果
**用途**: 所有主要代理都有此命令
**位置**: `.bmad/core/tasks/adv-elicit.xml`

#### 問題 4.2: Ephemeral Location
**概念**: `.bmad-ephemeral/` 目錄
**用途**:
- 存放臨時文件
- Stories 目錄
- Retrospectives 目錄
**配置**: `dev_ephemeral_location: '{project-root}/.bmad-ephemeral'`

#### 問題 4.3: Manifest 系統
**遺漏**: 文章未提及 manifest 文件系統
**實際存在**:
- `agent-manifest.csv` - 所有代理清單
- `workflow-manifest.csv` - 所有工作流程清單
- `task-manifest.csv` - 所有任務清單
- `tool-manifest.csv` - 所有工具清單
- `files-manifest.csv` - 檔案清單

### 5. 測試工作流程細節不足

#### 問題 5.1: 測試工作流程命名
**文章中**: `*framework`, `*atdd`, `*automate` 等
**實際**:
- 工作流程名稱: `testarch-framework`, `testarch-atdd` 等
- 命令觸發器: `*framework`, `*atdd` 等
**說明**: 需要澄清工作流程名稱與命令的區別

#### 問題 5.2: TEA 代理知識庫
**遺漏重要資訊**:
- TEA 使用索引檔案: `.bmad/bmm/testarch/tea-index.csv`
- 知識片段位置: `.bmad/bmm/testarch/knowledge/`
- 測試資源檔案: `test-resources-for-ai-flat.txt`
- TEA 啟動時會載入相關知識片段

### 6. 配置系統不完整

#### 問題 6.1: 變數解析順序
**遺漏**: 文章未詳細說明變數解析機制
**實際流程**:
1. 載入外部配置 (config_source)
2. 解析 {config_source}: 參照
3. 解析系統變數 (date:system-generated)
4. 解析路徑變數 ({project-root}, {installed_path})
5. 詢問使用者未知變數

#### 問題 6.2: Smart Input File Patterns
**概念**: 工作流程可定義智慧輸入檔案模式
**功能**:
- 優先順序: 完整文件 > 分片版本
- 支援萬用字元
- 自動偵測分片索引

範例（來自 PRD workflow）:
```yaml
input_file_patterns:
  product_brief:
    whole: "{output_folder}/*brief*.md"
    sharded: "{output_folder}/*brief*/index.md"
```

### 7. Party Mode 細節

#### 問題 7.1: Party Mode 機制
**遺漏**: 文章對 Party Mode 的描述較簡略
**實際**:
- 定義在 `.bmad/core/workflows/party-mode/workflow.yaml`
- 會載入 agent-manifest.csv
- 協調所有已安裝代理的群組討論
- 支援自然多代理對話

---

## 需要補充的內容

### 1. 代理名稱對照表

| 代理 ID | 顯示名稱 | 角色 | 圖示 |
|---------|----------|------|------|
| bmad-master | BMad Master | 主控執行器、知識保管人、工作流程協調者 | 🧙 |
| analyst | Mary | 業務分析師 | 📊 |
| architect | Winston | 架構師 | 🏗️ |
| dev | Amelia | 開發代理 | 💻 |
| pm | John | 產品經理 | 📋 |
| sm | Bob | Scrum Master | 🏃 |
| tea | Murat | 測試架構大師 | 🧪 |
| tech-writer | Paige | 技術文件撰寫者 | 📚 |
| ux-designer | Sally | UX 設計師 | 🎨 |

### 2. 完整的 Phase 4 工作流程

| 工作流程 | 命令 | 說明 | 獨立執行 |
|----------|------|------|----------|
| sprint-planning | `*sprint-planning` | 生成和管理 Sprint 狀態追蹤文件 | 是 |
| epic-tech-context | `*epic-tech-context` | 從 PRD 和架構生成綜合技術規格 | 是 |
| create-story | `*create-story` | 從 Epic/PRD 和架構創建下一個使用者故事 | 是 |
| story-context | `*story-context` | 組裝動態 Story Context XML | 是 |
| story-ready | `*story-ready` | 將草擬的 Story 標記為準備開發 | 是 |
| dev-story | `*develop-story` | 執行 Story 開發 | 是 |
| code-review | `*code-review` | 資深開發者程式碼審查 | 是 |
| story-done | `*story-done` | 標記 Story 完成 (DoD) | 是 |
| retrospective | `*retrospective` | Epic 完成後回顧 | 是 |
| correct-course | `*correct-course` | Sprint 執行期間的重大變更導航 | 是 |

### 3. Story 生命週期完整說明

```
1. Backlog (待辦) - Story 在 Epic 中定義
2. Drafted (草擬) - SM: *create-story 創建詳細 Story
3. Ready (準備就緒) - 選項 A: SM: *story-context 組裝上下文
                      選項 B: SM: *story-ready 僅更新狀態
4. In Progress (進行中) - DEV: *develop-story 開發
5. Review (審查中) - DEV: *code-review 審查
6. Done (完成) - DEV: *story-done 標記完成
```

**Story-Context vs Story-Ready 的選擇**:
- 使用 `*story-context`: 需要組裝完整上下文（架構、現有程式碼、文件）
- 使用 `*story-ready`: 簡單 Story 或已有足夠上下文時

### 4. Brownfield 專案完整流程

```
1. 載入 Tech Writer 或 Analyst
2. *document-project
   - 選擇是否啟用分片
   - 掃描程式碼結構
   - 識別架構模式
   - 生成技術債務報告
3. 載入 Analyst
4. *workflow-init
   - 選擇 "Brownfield" 模式
   - 系統會參考生成的文件
5. 進入正常流程
```

### 5. 進階引導技術 (Advanced Elicitation)

**命令**: `*adv-elicit`
**可用於**: Analyst, PM, Architect, SM, TEA, UX Designer, Tech Writer
**用途**:
- 挑戰 LLM 產生更深入的分析
- 探索替代方案
- 發現隱藏的需求或風險
- 提高輸出品質

**使用時機**:
- 需求不明確時
- 需要創意解決方案時
- 風險評估不足時
- 需要驗證假設時

### 6. 檔案路徑解析規則

1. **{project-root}**: 專案根目錄，自動偵測
2. **{bmad_folder}**: BMAD 安裝目錄，通常是 `.bmad`
3. **{output_folder}**: 文件輸出目錄，通常是 `docs/`
4. **{config_source}:key**: 從配置文件中讀取值
5. **{installed_path}**: 工作流程安裝路徑
6. **{context_dir}**: 當前上下文目錄（會話相關）
7. **{ephemeral_files}**: 臨時文件目錄 `.bmad-ephemeral/`

### 7. 測試架構詳細說明

#### TEA 代理工作流程

| 命令 | 工作流程名稱 | 獨立執行 | 說明 |
|------|-------------|----------|------|
| `*framework` | testarch-framework | 否 | 初始化測試框架（Playwright/Cypress） |
| `*atdd` | testarch-atdd | 否 | 實作前生成失敗的驗收測試（TDD red-green-refactor）|
| `*automate` | testarch-automate | 否 | 實作後擴展測試自動化覆蓋率 |
| `*test-design` | testarch-test-design | 否 | 開發前規劃風險緩解和測試覆蓋策略 |
| `*trace` | testarch-trace | 否 | 生成需求追溯矩陣，分析覆蓋率，做出品質關卡決策 |
| `*nfr-assess` | testarch-nfr | 否 | 發布前評估非功能性需求 |
| `*ci` | testarch-ci | 否 | 建構 CI/CD 品質管道 |
| `*test-review` | testarch-test-review | 否 | 使用知識庫和最佳實踐驗證審查測試品質 |

**standalone: false 的含義**: 這些測試工作流程通常作為其他工作流程的一部分被調用，而非獨立執行。

### 8. MCP 增強功能

**配置**:
```yaml
tea_use_mcp_enhancements: true
```

**TEA 代理 MCP 功能**:
- 存取最新測試框架文件（Playwright, Cypress, Pact）
- 使用即時最佳實踐
- 整合外部測試工具
- 自動更新知識庫

**實作細節**:
```
step n="6":
Cross-check recommendations with the current official Playwright,
Cypress, Pact, and CI platform documentation; fall back to
test-resources-for-ai-flat.txt only when deeper sourcing is required
```

---

## 技術準確性驗證

### ✅ 已驗證正確

1. **目錄結構**: 完全正確
2. **配置變數**: 基本正確
3. **工作流程引擎規則**: 正確
4. **四階段流程**: 正確
5. **規模自適應系統**: 正確
6. **軌道劃分**: 正確
7. **範例專案流程**: 基本正確

### ⚠️ 需要修正

1. 命令名稱錯誤（見上述）
2. 代理資訊不完整（見上述）
3. 工作流程遺漏（見上述）

### ➕ 建議補充

1. Manifest 系統說明
2. Ephemeral location 用途
3. Advanced Elicitation 技術
4. Document Project 工作流程詳解
5. Story-Context vs Story-Ready 選擇指南
6. Party Mode 機制詳解
7. MCP 增強功能說明
8. TEA 知識庫系統

---

## 建議的文章改進優先級

### 高優先級（立即修正）

1. ✅ 修正命令名稱錯誤
   - `*story-ready-for-dev` → `*story-ready`
   - `*create-ux-design` → `*create-design`

2. ✅ 補充代理正確名稱
   - Sally (UX Designer)
   - Paige (Tech Writer)

3. ✅ 補充 workflow-status 說明

4. ✅ 補充 story-ready 與 story-context 的區別

### 中優先級（建議補充）

5. ⏳ 補充 Tech Writer (Paige) 的完整功能

6. ⏳ 補充 Advanced Elicitation 技術說明

7. ⏳ 補充 Document Project 工作流程

8. ⏳ 補充 Retrospective 的詳細機制

9. ⏳ 補充 Ephemeral Location 概念

### 低優先級（可選補充）

10. ⏳ 補充 Manifest 系統

11. ⏳ 補充 Smart Input File Patterns

12. ⏳ 補充 TEA 知識庫系統

13. ⏳ 補充 MCP 增強功能細節

---

## 範例程式碼驗證

### Todo List API 範例

**驗證結果**: 基本正確，但需要補充細節

**建議改進**:

1. Step 4 補充說明:
   ```
   AI 會分析 PRD 並建議 Epic 和 Story 拆分。
   此過程會考慮：
   - 功能相關性
   - 依賴關係
   - 技術複雜度
   - 開發優先級
   ```

2. Step 9 補充 Story Context XML 的實際用途:
   ```
   Story Context XML 是 DEV 代理的權威資訊來源，包含：
   - 相關架構決策（避免衝突）
   - 資料庫 Schema（確保一致性）
   - 現有 API 端點（避免重複）
   - Epic 技術上下文（符合規範）
   ```

3. Step 10 補充 DEV 代理行為:
   ```
   DEV 代理會：
   - 嚴格遵循 Story Context XML
   - 不會"發明"不存在的函數或模組
   - 每個變更都對應特定 AC
   - 持續實作直到所有 AC 滿足（不中途暫停）
   - 執行測試至 100% 通過
   ```

---

## 結論

文章整體架構完整，技術深度足夠，但存在一些細節錯誤和遺漏。

**優點**:
- 架構說明清晰
- 流程描述完整
- 範例實用

**待改進**:
- 部分命令名稱錯誤
- 代理資訊不完整
- 進階功能描述不足
- 缺少一些重要概念

**建議行動**:
1. 立即修正高優先級問題
2. 逐步補充中優先級內容
3. 根據使用者反饋調整低優先級項目

---

**驗證人員**: Claude (Sonnet 4.5)
**驗證方法**:
- 讀取實際配置文件
- 檢查代理定義
- 驗證工作流程 YAML
- 比對 manifest 文件
- 交叉驗證文件路徑

**可信度**: 高（基於實際檔案內容驗證）
